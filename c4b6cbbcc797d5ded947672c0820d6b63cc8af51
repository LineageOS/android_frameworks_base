{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "0fec0e88_35d88967",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 14048
      },
      "writtenOn": "2024-08-23T06:26:23Z",
      "side": 1,
      "message": "Verified on zeekr. Prior to this change, setting a secondary cutout resulted in gross miscalculations in secondary logical display size, causing display elements to be very out of sorts. If secondary display cutout masking was enabled, the secondary display failed to init entirely. After this change, the secondary display size is calculated properly. Using the mask also works as expected. This change has been approved for merging to aosp, but as of posting has not yet been merged.",
      "revId": "c4b6cbbcc797d5ded947672c0820d6b63cc8af51",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cd11abe2_fe882398",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 14048
      },
      "writtenOn": "2024-09-10T21:59:51Z",
      "side": 1,
      "message": "Well, we\u0027ve got normal aosp marination continuing here. Author of the original change agreed it was an issue (see change on aosp gerrit). So do we need to continue holding this here?",
      "revId": "c4b6cbbcc797d5ded947672c0820d6b63cc8af51",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1e1ba6bf_c6529789",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 2195
      },
      "writtenOn": "2024-09-11T10:17:59Z",
      "side": 1,
      "message": "Uhh, my",
      "revId": "c4b6cbbcc797d5ded947672c0820d6b63cc8af51",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "66520df6_c7ea1379",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 2195
      },
      "writtenOn": "2024-09-11T10:17:59Z",
      "side": 1,
      "message": "My concerns with these with just wrt modifiying `framework-res` in general.\n\nhttps://github.com/LMODroid/platform_frameworks_base/commit/4337f194d727d8d840c3322a1ba388648d02afc4 for example as to what might cause trouble.",
      "parentUuid": "cd11abe2_fe882398",
      "revId": "c4b6cbbcc797d5ded947672c0820d6b63cc8af51",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "92a4f40d_0cd30bf5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 11883
      },
      "writtenOn": "2024-09-11T10:19:11Z",
      "side": 1,
      "message": "Well those apps are more or less incorrect and should be smali patched",
      "parentUuid": "66520df6_c7ea1379",
      "revId": "c4b6cbbcc797d5ded947672c0820d6b63cc8af51",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "54f448b0_889f51e5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 2195
      },
      "writtenOn": "2024-09-11T11:17:34Z",
      "side": 1,
      "message": "Sure, but they\u0027re shipping now, and so if this gets merged, it _might_ break nightlies for a bunch of devices right away.",
      "parentUuid": "92a4f40d_0cd30bf5",
      "revId": "c4b6cbbcc797d5ded947672c0820d6b63cc8af51",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9d233b7b_c042d5a7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 14048
      },
      "writtenOn": "2024-09-11T17:24:40Z",
      "side": 1,
      "message": "This hard blocks at least zeekr, potentially smith as well. I can\u0027t ship the former until the rest of moto sm8475 gets pushed, but I\u0027m still trying to get it out on 21. But without this, if I do a cutout on the external display, sf init for that display just crashes. Meaning I\u0027d have to ship with elements under the cameras, which just isn\u0027t sane.\n\nI don\u0027t think anything shipping can be using the resource, because the code that uses it just crashes. The code wants a int array and the current aosp resource is a string. That\u0027s never going to work.",
      "revId": "c4b6cbbcc797d5ded947672c0820d6b63cc8af51",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "eae37fac_36526c72",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 14048
      },
      "writtenOn": "2024-09-11T17:38:42Z",
      "side": 1,
      "message": "https://github.com/LineageOS/android_frameworks_base/blob/lineage-21.0/core/java/android/view/DisplayCutout.java#L1161-L1163\nThe code is here, fwiw. It\u0027s reading the array of arrays at\nhttps://github.com/LineageOS/android_frameworks_base/blob/lineage-21.0/core/java/android/view/DisplayCutout.java#L1161-L1163\nThe first element is\nhttps://github.com/LineageOS/android_frameworks_base/blob/lineage-21.0/core/res/res/values/config.xml#L4072-L4079\nan int array. The second element is\nhttps://github.com/LineageOS/android_frameworks_base/blob/lineage-21.0/core/res/res/values/config.xml#L6461-L6462\na string array. And as seen in the code, it tries to read that as an int array. If anything is using that, it\u0027s getting the same crash that I see on zeekr and the display would be unusable. I sincerely hope nothing shipping is setting those secondary cutouts.",
      "revId": "c4b6cbbcc797d5ded947672c0820d6b63cc8af51",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f993bee8_084b378a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 2195
      },
      "writtenOn": "2024-09-11T18:36:36Z",
      "side": 1,
      "message": "Yes, I intentionally hard blocked it because it looks like my concerns aren\u0027t being understood.\n\nI\u0027m not saying your fix is wrong. See comment below.",
      "parentUuid": "9d233b7b_c042d5a7",
      "revId": "c4b6cbbcc797d5ded947672c0820d6b63cc8af51",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6c1e02cc_f0940688",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 2195
      },
      "writtenOn": "2024-09-11T18:36:36Z",
      "side": 1,
      "message": "I have already seen this in the chat. My comments aren\u0027t about anything using this specific array.\n\nThey\u0027re about any proprietary apk which relies on `framework-res` resources. This patch affects the entire platform, it _might_ change IDs, and that _may_ lead to crashes on such devices. \n\nIt\u0027s solely due to doing any edits to `framework-res`. There\u0027s a reason we don\u0027t edit it.\n\nNow maybe I\u0027m being overly cautious, but I\u0027d rather not have the nightlies after this just break. At least not when what I\u0027m trying to say isn\u0027t coming across at all.\n\n\nSo,\n\n1. Does this change affect the IDs of resources in `framework-res`?\n2. What devices would this affect?",
      "parentUuid": "eae37fac_36526c72",
      "revId": "c4b6cbbcc797d5ded947672c0820d6b63cc8af51",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    }
  ]
}